# Chapter 9. 일시 중단 함수

## 9.1. 일시 중단 함수와 코루틴

### 9.1.1. 일시 중단 함수란 무엇인가?

- 일시 중단 함수 : suspend fun 키워드로 선언되는 함수
- 함수 내에 일시 중단 지점을 포함할 수 있음

### 9.1.2. 일시 중단 함수는 코루틴이 아니다

- 일시 중단 함수를 사용한다고 코루틴이 1개 더 만들어지지는 않는다.

### 9.1.3. 일시 중단 함수를 별도의 코루틴상에서 실행하기

- 일시 중단 함수를 새로운 코루틴에서 실행하고 싶다면 일시 중단 함수를 코루틴 빌더 함수로 감싸면 된다.

## 9.2. 일시 중단 함수의 사용

### 9.2.1. 일시 중단 함수의 호출 가능 지점

- 코루틴 내부
- 일시 중단 함수

### 9.2.2. 일시 중단 함수에서 코루틴 실행하기

- 일시 중단 함수에서 launch나 async 같은 코루틴 빌더 함수를 호출하기 위해서는 일시 중단 함수 내부에서 CoroutineScope 객체에 접근할 수 있도록 해야 한다.

#### 9.2.2.2. coroutineScope 사용해 일시 중단 함수에서 코루틴 실행하기

- coroutineScope 일시 중단 함수를 사용하면 일시 중단 함수 내부에 새로운 CoroutineScope 객체를 생성할 수 있다.
- coroutineScope는 구조화를 깨지 않는 CoroutineScope 객체를 생성한다

![image](https://github.com/user-attachments/assets/8e0c56ef-cb8c-42fc-9272-d6e18aa2c1f0)

- 하지만 예외 발생 시 함수를 호출한 코루틴에까지 예외가 전파돼 호출부의 코루틴까지 모두 취소돼 버린다.

#### 9.2.2.3. supervisorScope 사용해 일시 중단 함수에서 코루틴 실행하기

- Job 대신 SupervisorJob 객체를 생성
- 예외가 발생해도 부모 코루틴으로 예외가 전파되지 않음

## 9.3. 요약

1. 일시 중단 함수는 suspend fun 키워드로 선언되며, 일시 중단 지점이 포함된 코드를 재사용이 가능한 단위로 만들어 구조화하는 데 사용된다.
2. 일시 중단 함수는 코루틴이 아니며, 일시 중단 지점을 포함할 수 있는 코드의 집합일 뿐이다.
3. 일시 중단 함수가 일반 함수와 다른 점은 일시 중단 지점을 포함한다는 것이다.
4. 일시 중단 함수는 코루틴이나 다른 일시 중단 함수 내부 등 일시 중단이 가능한 지점에서만 호출될 수 있다.
5. 일시 중단 함수 내부에서 coroutineScope 함수를 사용해 코루틴의 구조화를 깨지 않는 새로운 CoroutineScope 객체를 생성할 수 있다.
6. coroutineScope 함수를 사용해 만든 CoroutineScope 객체를 사용해 launch나 async 같은 코루틴 빌더를 호출할 수 있다. 이를 사용하면 일시 중단 함수 내부에서 비동기 작업을 병렬로 실행할 수 있다.
7. coroutineScope 함수 대신 supervisorScope 함수를 사용해 일시 중단 함수 내부에서 생성된 코루틴의 예외 전파를 제한할 수 있다.

